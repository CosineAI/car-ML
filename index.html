<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>evolve_car.py — Source Viewer</title>
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="stylesheet" href="https://unpkg.com/prismjs@1.29.0/themes/prism.min.css">
  <style>
    :root { color-scheme: light dark; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg, #fff);
    }
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      padding: 0.9rem 1.1rem;
      background: #f5f5f7;
      border-bottom: 1px solid rgba(0,0,0,.08);
    }
    h1 {
      font-size: 1.1rem;
      margin: 0;
      font-weight: 600;
    }
    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1rem;
    }
    .note {
      margin: .4rem 0 1rem 0;
      color: #666;
      font-size: .95rem;
    }
    pre {
      border-radius: 10px;
      box-shadow: 0 1px 18px rgba(0,0,0,.06);
      overflow: auto;
    }
    .toolbar {
      display: flex;
      gap: .75rem;
      align-items: center;
      justify-content: space-between;
      margin: .25rem 0 .85rem;
      flex-wrap: wrap;
    }
    .btn {
      cursor: pointer;
      border: 1px solid rgba(0,0,0,.15);
      background: #fff;
      color: #111;
      padding: .45rem .65rem;
      border-radius: 8px;
      font-size: .9rem;
    }
    .btn:active { transform: translateY(1px); }
    @media (prefers-color-scheme: dark) {
      header { background: #1f1f1f; border-bottom-color: #2a2a2a; }
      .note { color: #aaa; }
      .btn { background: #2b2b2b; color: #eee; border-color: #444; }
      pre { box-shadow: 0 1px 18px rgba(0,0,0,.3); }
    }
  </style>
</head>
<body>
  <header>
    <h1>evolve_car.py — Source Viewer</h1>
  </header>
  <main>
    <div class="toolbar">
      <div class="note">
        Viewing evolve_car.py. To run locally: <code>python evolve_car.py --gens 20</code>
      </div>
      <button id="copy-btn" class="btn" type="button">Copy</button>
    </div>

    <pre><code id="code" class="language-python">Loading...</code></pre>
    <p class="note" id="hint"></p>
  </main>

  <!-- Prism core and autoloader to fetch the Python component -->
  <script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-autoloader-path="https://unpkg.com/prismjs@1.29.0/components/"></script>
  <script>
    (async function () {
      const codeEl = document.getElementById('code');
      const hintEl = document.getElementById('hint');

      try {
        const res = await fetch('evolve_car.py', { cache: 'no-store' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const text = await res.text();
        codeEl.textContent = text;
        if (window.Prism && Prism.highlightElement) {
          Prism.highlightElement(codeEl);
        }
      } catch (err) {
        codeEl.textContent =
`Failed to load evolve_car.py.

If you are opening this file directly via file://, most browsers block fetch() for local files.
Run a simple local web server in this folder:

    python -m http.server 8000

Then open:
    http://localhost:8000/index.html`;
        hintEl.textContent = String(err);
      }

      document.getElementById('copy-btn').addEventListener('click', async () => {
        try {
          await navigator.clipboard.writeText(codeEl.textContent);
          const btn = document.getElementById('copy-btn');
          const old = btn.textContent;
          btn.textContent = 'Copied';
          setTimeout(() => (btn.textContent = old), 1200);
        } catch {
          alert('Copy failed — your browser may not allow clipboard access on file:// pages.');
        }
      });
    })();
  </script>
</body>
</html>